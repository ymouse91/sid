<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <!--<link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#1a73e8" />
  <link rel="apple-touch-icon" href="apple-touch-icon-180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default"> -->
  <link rel="stylesheet" href="style.css" />
  
  <title>Solitaire Dice (Sid Sackson) â€“ PWA</title>
</head>
<body>
<header class="topbar">
  <div class="title">ğŸ² Solitaire Dice â€” Sid Sackson</div>
  <div class="topbar-actions">
    <button id="installBtn" class="secondary" hidden>Asenna</button>
    <button id="resetBtn" class="danger">Uusi peli</button>
  </div>
</header>

<main>
  <section class="status">
    <div>Heitto: <span id="turnNum">1</span></div>
    <div>Tilanne: <span id="statusText">HeitÃ¤ nopat.</span></div>
    <div>Yhteispisteet: <span id="totalScore">0</span></div>
  </section>

  <section class="dice-panel">
    <div class="dice" id="dice"></div>
    <div class="controls">
      <button id="rollBtn" class="primary">HeitÃ¤ nopat</button>
      <button id="commitBtn" class="primary" disabled>Kirjaa valinta</button>
      <button id="undoBtn" class="secondary" disabled>Peru</button>
      <button id="helpBtn" class="secondary">Ohje</button>
    </div>
    <div class="hint">Valitse ensin <strong>2</strong> noppaa (pari A), sitten <strong>2</strong> noppaa (pari B). Viides noppa on poistodice.</div>
  </section>

  <section class="board">
    <div class="scorecard">
      <h2>Pistetaulukko (2â€“12)</h2>
      <table id="scoreTable" aria-label="Pistetaulukko">
        <thead>
          <tr><th>Summa</th><th>Arvo</th><th>MerkintÃ¶jÃ¤</th><th>Pisteet</th></tr>
        </thead>
        <tbody>
          <!-- Rows injected by JS -->
        </tbody>
      </table>
      <p class="target">Tavoite: 500+ pistettÃ¤ on â€œvoittoâ€.</p>
    </div>

    <div class="throwaways">
      <h2>Poistodice (valitse enintÃ¤Ã¤n 3)</h2>
      <p style="font-size: .8rem;">Kun yhden numeron merkintÃ¶jÃ¤ kertyy <strong>8</strong>, peli pÃ¤Ã¤ttyy. â€œVapaa kyytiâ€: jos heitossa ei nÃ¤y yhtÃ¤Ã¤n aiempaa poistodice-numeroa, voit heittÃ¤Ã¤ minkÃ¤ tahansa pois ilman merkintÃ¤Ã¤.</p>
      <div class="throw-grid" id="throwGrid">
        <!-- 1..6 injected by JS -->
      </div>
    </div>
  </section>
</main>

<footer class="footer">
  <span>Â© Sid Sacksonin peli â€“ koodattu sinulle. SÃ¤Ã¤nnÃ¶t pohjautuvat Seattle Cosmic -kirjaukseen.</span>
</footer>

<!-- Modals -->
<dialog id="helpDialog">
  <h3>Solitaire Dice â€“ ohje</h3>
  <ol>
    <li>HeitÃ¤ 5 noppaa.</li>
    <li>Valitse 2 noppaa â†’ <em>pari A</em>, sitten 2 noppaa â†’ <em>pari B</em>.</li>
    <li>Parien summat (2â€“12) merkitÃ¤Ã¤n taulukkoon (merkintÃ¶jen mÃ¤Ã¤rÃ¤ kasvaa).</li>
    <li>JÃ¤ljelle jÃ¤Ã¤vÃ¤ 5. noppa on <strong>poistodice</strong>:
      <ul>
        <li>EnsimmÃ¤iset kolme poistodice-numeroa â€œvalitaanâ€ pelin aikana automaattisesti sen mukaan, mitÃ¤ jÃ¤tÃ¤t ylimÃ¤Ã¤rÃ¤iseksi.</li>
        <li>Jos sinulla on jo 3 poistodice-numeroa ja heitossa ei nÃ¤y niistÃ¤ yhtÃ¤Ã¤n, saat <strong>vapaa kyyti</strong> â€” ylimÃ¤Ã¤rÃ¤inen ei lisÃ¤Ã¤ poistomerkintÃ¶jÃ¤.</li>
        <li>Jos sinulla on jo 3 numeroa ja heitossa <em>nÃ¤kyy</em> jokin niistÃ¤, ylimÃ¤Ã¤rÃ¤isen on oltava jokin nÃ¤istÃ¤ (muuten et voi kirjata valintaa).</li>
      </ul>
    </li>
    <li>Peli pÃ¤Ã¤ttyy, kun jokin poistodice-numero saavuttaa 8 merkintÃ¤Ã¤.</li>
  </ol>
  <p><strong>Pisteytys per summa:</strong> 1â€“3 merkintÃ¤Ã¤ = âˆ’200, 4. = 0, 5â€“10. = +arvo per merkintÃ¤ (2/12=100, 3/11=70, 4/10=60, 5/9=50, 6=40, 7=30). Yli 10 ei lisÃ¤Ã¤.</p>
  <button id="closeHelp">OK</button>
</dialog>

<script src="app.js" defer></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js');
    });
  }
</script>
</body>
</html>